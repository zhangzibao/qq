{"version":3,"sources":["webpack:///G:/vue/my_unip_app/qq/App.vue?59d5","webpack:///G:/vue/my_unip_app/qq/App.vue?b68b","webpack:///G:/vue/my_unip_app/qq/App.vue?3068","webpack:///G:/vue/my_unip_app/qq/main.js","webpack:///G:/vue/my_unip_app/qq/utils/util.js","webpack:///G:/vue/my_unip_app/qq/vuex/actions.js","webpack:///G:/vue/my_unip_app/qq/vuex/getters.js","webpack:///G:/vue/my_unip_app/qq/vuex/mutations.js","webpack:///G:/vue/my_unip_app/qq/vuex/state.js","webpack:///G:/vue/my_unip_app/qq/vuex/store.js","webpack:///G:/vue/my_unip_app/qq/App.vue","webpack:///G:/vue/my_unip_app/qq/App.vue?1246"],"names":["Vue","prototype","$store","store","config","productionTip","App","mpType","app","$mount","nowDate","format","date","Date","now","add0","m","time","parseInt","y","getFullYear","getMonth","d","getDate","h","getHours","mm","getMinutes","s","getSeconds","formatTimeStamp","fmt","timestamp","o","Math","floor","getMilliseconds","test","replace","RegExp","$1","substr","length","k","formatSyl","val","toFixed","formatVol","actions","Login","userInfo","commit","state","uni","request","url","user_id","then","err","res","self","data","friends","Authorization","token","hasLogin","isAjax","setStorageSync","e","updateData","addMessage","friendId","isreceive","messageContent","userId","sender","reciver","method","header","statusCode","sendRobotValue","info","userid","robotData","code","text","addnewfriend","me_and_friend","id","stranger","friend_and_me","push","console","log","getters","friend","find","x","activeId","nowMessageList","messageList","list","mutations","logout","closeSocket","removeStorageSync","getself","getfriends","changefriend","value","forEach","uAvatar","changeSelf","setMessageList","messageListFB","changesocket","status","socketOpen","getActiveId","setStranger","changeList","obj","addTime","util","undefined","item","index","arr","removeMessage","splice","use","Vuex","Store","computed","onLaunch","onSocketOpen","onSocketError","onSocketClose","onSocketMessage","json","JSON","parse","dispatch","onShow","onHide","methods"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACuD;AACL;AACa;;;AAG/D;AAC2I;AAC3I,gBAAgB,yJAAU;AAC1B,EAAE,yEAAM;AACR;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAYf;AACD;AACe,gF;;;;;;;;;;;;AClCf;AAAA;AAAA;AAAA;AAAuqB,CAAgB,ksBAAG,EAAC,C;;;;;;;;;;;;ACA3rB;AAAA;AAAA;AAAA;AAAqxB,CAAgB,qyBAAG,EAAC,C;;;;;;;;;;;;ACAzyB;AACA;AACA;AACA,6H;AACAA,aAAIC,SAAJ,CAAcC,MAAd,GAAuBC,cAAvB;AACAH,aAAII,MAAJ,CAAWC,aAAX,GAA2B,KAA3B;AACAC,aAAIC,MAAJ,GAAa,KAAb;AACA,IAAMC,GAAG,GAAG,IAAIR,YAAJ;AACRM,YADQ,EAAZ;;AAGAE,GAAG,CAACC,MAAJ,G;;;;;;;;;;;;;;;;;;;;;;;;sGCVe;AACdC,SADc,mBACNC,MADM,EACE;AACf,QAAIC,IAAI,GAAGC,IAAI,CAACC,GAAL,EAAX;;AAEA,aAASC,IAAT,CAAcC,CAAd,EAAiB;AAChB,aAAOA,CAAC,GAAG,EAAJ,GAAS,MAAMA,CAAf,GAAmBA,CAA1B;AACA;AACD,QAAIC,IAAI,GAAG,IAAIJ,IAAJ,CAASK,QAAQ,CAACN,IAAD,CAAjB,CAAX;AACA,QAAIO,CAAC,GAAGF,IAAI,CAACG,WAAL,EAAR;AACA,QAAIJ,CAAC,GAAGC,IAAI,CAACI,QAAL,KAAkB,CAA1B;AACA,QAAIC,CAAC,GAAGL,IAAI,CAACM,OAAL,EAAR;AACA,QAAIC,CAAC,GAAGP,IAAI,CAACQ,QAAL,EAAR;AACA,QAAIC,EAAE,GAAGT,IAAI,CAACU,UAAL,EAAT;AACA,QAAIC,CAAC,GAAGX,IAAI,CAACY,UAAL,EAAR;AACA,QAAIlB,MAAM,IAAI,qBAAd,EAAqC;AACpC,aAAOQ,CAAC,GAAG,GAAJ,GAAUJ,IAAI,CAACC,CAAD,CAAd,GAAoB,GAApB,GAA0BD,IAAI,CAACO,CAAD,CAA9B,GAAoC,GAApC,GAA0CP,IAAI,CAACS,CAAD,CAA9C,GAAoD,GAApD,GAA0DT,IAAI,CAACW,EAAD,CAA9D,GAAqE,GAArE,GAA2EX,IAAI,CAACa,CAAD,CAAtF;AACA,KAFD,MAEO;AACN,aAAOT,CAAC,GAAG,GAAJ,GAAUJ,IAAI,CAACC,CAAD,CAAd,GAAoB,GAApB,GAA0BD,IAAI,CAACO,CAAD,CAArC;AACA;AACD,GAnBa;AAoBdQ,iBApBc,2BAoBEC,GApBF,EAoBOC,SApBP,EAoBkB;AAC/B;AACAA,aAAS,GAAG,IAAInB,IAAJ,CAASK,QAAQ,CAACc,SAAD,CAAjB,CAAZ;AACA,QAAIC,CAAC,GAAG;AACP,YAAMD,SAAS,CAACX,QAAV,KAAuB,CADtB,EACyB;AAChC,YAAMW,SAAS,CAACT,OAAV,EAFC,EAEoB;AAC3B,YAAMS,SAAS,CAACP,QAAV,EAHC,EAGqB;AAC5B,YAAMO,SAAS,CAACL,UAAV,EAJC,EAIuB;AAC9B,YAAMK,SAAS,CAACH,UAAV,EALC,EAKuB;AAC9B,YAAMK,IAAI,CAACC,KAAL,CAAW,CAACH,SAAS,CAACX,QAAV,KAAuB,CAAxB,IAA6B,CAAxC,CANC,EAM2C;AAClD,WAAKW,SAAS,CAACI,eAAV,EAPE,CAO0B;AAP1B,KAAR;AASA,QAAI,OAAOC,IAAP,CAAYN,GAAZ,CAAJ;AACCA,OAAG,GAAGA,GAAG,CAACO,OAAJ,CAAYC,MAAM,CAACC,EAAnB,EAAuB,CAACR,SAAS,CAACZ,WAAV,KAA0B,EAA3B,EAA+BqB,MAA/B,CAAsC,IAAIF,MAAM,CAACC,EAAP,CAAUE,MAApD,CAAvB,CAAN;AACD,SAAK,IAAIC,CAAT,IAAcV,CAAd;AACC,UAAI,IAAIM,MAAJ,CAAW,MAAMI,CAAN,GAAU,GAArB,EAA0BN,IAA1B,CAA+BN,GAA/B,CAAJ;AACCA,SAAG,GAAGA,GAAG,CAACO,OAAJ,CAAYC,MAAM,CAACC,EAAnB,EAAwBD,MAAM,CAACC,EAAP,CAAUE,MAAV,IAAoB,CAArB,GAA2BT,CAAC,CAACU,CAAD,CAA5B,GAAoC,CAAC,OAAOV,CAAC,CAACU,CAAD,CAAT,EAAcF,MAAd,CAAqB,CAAC,KAAKR,CAAC,CAACU,CAAD,CAAP,EAAYD,MAAjC,CAA3D,CAAN,CAFF;AAGA,WAAOX,GAAP;AACA,GAtCa;;AAwCda,WAxCc,qBAwCJC,GAxCI,EAwCC;AACd,QAAIA,GAAJ,EAAS,CAAE,CAAX,MAAiB;AAChBA,SAAG,GAAG,CAAN;AACA;AACD,QAAIA,GAAG,IAAI,CAAX,EAAc;AACb,aAAO,IAAP;AACA,KAFD,MAEO;AACN,aAAOA,GAAG,CAACC,OAAJ,CAAY,CAAZ,CAAP;AACA;AACD,GAjDa;AAkDd;AACAC,WAnDc,qBAmDJF,GAnDI,EAmDC;AACd,QAAIA,GAAG,IAAI,CAAX,EAAc;AACb,aAAO,IAAP;AACA,KAFD,MAEO;AACN,aAAOA,GAAG,CAACC,OAAJ,CAAY,CAAZ,CAAP;AACA;AACD,GAzDa,E;;;;;;;;;;;;;;;;ACIf,wH;;AAEA,IAAME,OAAO,GAAG;AACZ;AACA;AACMC,OAHM;;;AAMGC,YANH,6IAIIC,MAJJ,QAIIA,MAJJ,EAKIC,KALJ,QAKIA,KALJ;;AAQFC,mBAAG,CAACC,OAAJ,CAAY;AACdC,qBAAG,EAAE,oDAAoDL,QAAQ,CAACM,OADpD,CAC6D;AAD7D,iBAAZ,EAEHC,IAFG,CAEE,iBAAgB,sCAAdC,GAAc,YAATC,GAAS;AACpBP,uBAAK,CAACQ,IAAN,GAAaD,GAAG,CAACE,IAAjB;AACH,iBAJK,CARE;;AAcFR,mBAAG,CAACC,OAAJ,CAAY;AACdC,qBAAG,EAAE,uDAAuDL,QAAQ,CAACM,OADvD,CACgE;AADhE,iBAAZ,EAEHC,IAFG,CAEE,iBAAgB,sCAAdC,GAAc,YAATC,GAAS;AACpBP,uBAAK,CAACU,OAAN,GAAgBH,GAAG,CAACE,IAApB;AACH,iBAJK,CAdE;AAmBFR,mBAAG,CAACC,OAAJ,CAAY;AACdC,qBAAG,EAAE,uDAAuDL,QAAQ,CAACM,OADvD,CACgE;AADhE,iBAAZ,EAEHC,IAFG,CAEE,iBAAgB,sCAAdC,GAAc,YAATC,GAAS;AACpBR,wBAAM,CAAC,gBAAD,EAAmBQ,GAAG,CAACE,IAAvB,CAAN;;AAEH,iBALK,CAnBE;AAyBRT,mBAAK,CAACW,aAAN,GAAsBb,QAAQ,CAACc,KAA/B;AACAZ,mBAAK,CAACI,OAAN,GAAgBN,QAAQ,CAACM,OAAzB;AACAJ,mBAAK,CAACa,QAAN,GAAiB,IAAjB;AACAb,mBAAK,CAACc,MAAN,GAAe,IAAf;AACA;AACA,kBAAI;AACAb,mBAAG,CAACc,cAAJ,CAAmB,UAAnB,EAA+Bf,KAA/B;AACA;AACH,eAHD,CAGE,OAAOgB,CAAP,EAAU;AACR;AACA;AACH,eApCO;;AAsCNC,YAtCM;AAuCSlB,oBAvCT,SAuCSA,MAvCT;AAwCSC,mBAxCT,SAwCSA,KAxCT;;AA0CFC,mBAAG,CAACC,OAAJ,CAAY;AACdC,qBAAG,EAAE,uDAAuDH,KAAK,CAACI,OADpD,CAC6D;AAD7D,iBAAZ,EAEHC,IAFG,CAEE,iBAAgB,uCAAdC,GAAc,aAATC,GAAS;AACpBP,uBAAK,CAACU,OAAN,GAAgBH,GAAG,CAACE,IAApB;AACH,iBAJK,CA1CE;AA+CFR,mBAAG,CAACC,OAAJ,CAAY;AACdC,qBAAG,EAAE,uDAAuDH,KAAK,CAACI,OADpD,CAC6D;AAD7D,iBAAZ,EAEHC,IAFG,CAEE,kBAAgB,wCAAdC,GAAc,aAATC,GAAS;AACpBR,wBAAM,CAAC,gBAAD,EAAmBQ,GAAG,CAACE,IAAvB,CAAN;AACH,iBAJK,CA/CE;AAoDR,kBAAI;AACAR,mBAAG,CAACc,cAAJ,CAAmB,UAAnB,EAA+Bf,KAA/B;AACA;AACH,eAHD,CAGE,OAAOgB,CAAP,EAAU;AACR;AACH,eAzDO;;AA2DZ;AACME,YA5DM;AA6DSnB,oBA7DT,UA6DSA,MA7DT;;AA+DSoB,sBA/DT,UA+DSA,QA/DT;AAgESC,uBAhET,UAgESA,SAhET;AAiESC,4BAjET,UAiESA,cAjET;;AAmEFC,oBAnEE,GAmEOvE,eAAMiD,KAAN,CAAYI,OAnEnB;AAoEFmB,oBApEE,GAoEO;AACXD,sBAAM,EAANA,MADW;AAEXH,wBAAQ,EAARA,QAFW;AAGXC,yBAAS,EAATA,SAHW;AAIXC,8BAAc,EAAdA,cAJW,EApEP;;AA0EFG,qBA1EE,GA0EQ;AACZF,sBAAM,EAAEH,QADI;AAEZA,wBAAQ,EAAEG,MAFE;AAGZF,yBAAS,EAAE,CAACA,SAHA;AAIZC,8BAAc,EAAdA;;AAEJ;AANgB,eA1ER,CAiFRpB,GAAG,CAACC,OAAJ,CAAY;AACRC,mBAAG,EAAE,sDADG;AAERM,oBAAI,EAAEc,MAFE;AAGRE,sBAAM,EAAE,MAHA;AAIRC,sBAAM,EAAE;AACJ,kCAAgB,kBADZ,EAJA,EAAZ;;AAOGrB,kBAPH,CAOQ,kBAAgB,wCAAdC,GAAc,aAATC,GAAS;AACpB,oBAAIA,GAAG,CAACE,IAAJ,KAAa,CAAjB,EAAoB;AAChB;AACAV,wBAAM,CAAC,YAAD,EAAe;AACjBoB,4BAAQ,EAARA,QADiB;AAEjBE,kCAAc,EAAdA,cAFiB;AAGjBD,6BAAS,EAATA,SAHiB,EAAf,CAAN;;AAKH,iBAPD,MAOO;AACHrB,wBAAM,CAAC,YAAD,EAAe;AACjBoB,4BAAQ,EAARA,QADiB;AAEjBE,kCAAc,EAAE,MAFC;AAGjBD,6BAAS,EAATA,SAHiB,EAAf,CAAN;;AAKA;AACH;AACJ,eAvBD;AAwBA;AACAnB,iBAAG,CAACC,OAAJ,CAAY;AACRC,mBAAG,EAAE,uDAAuDgB,QADpD,EAC8D;AACtEV,oBAAI,EAAE;AACFa,wBAAM,EAANA,MADE;AAEFD,gCAAc,EAAdA,cAFE,EAFE;;AAMRK,sBAAM,EAAE;AACJ,kCAAgB,kBADZ,EANA;;AASRD,sBAAM,EAAE,MATA,EAAZ;AAUGpB,kBAVH,CAUQ,kBAAgB,wCAAdC,GAAc,aAATC,GAAS;AACpB,oBAAIA,GAAG,CAACoB,UAAJ,KAAmB,GAAvB,EAA4B;AACxB;AACH,iBAFD,MAEO;AACH;AACH;AACJ,eAhBD;AAiBA;AACA1B,iBAAG,CAACC,OAAJ,CAAY;AACRC,mBAAG,EAAE,sDADG;AAERM,oBAAI,EAAEe,OAFE;AAGRC,sBAAM,EAAE,MAHA;AAIRC,sBAAM,EAAE;AACJ,kCAAgB,kBADZ,EAJA,EAAZ;;AAOGrB,kBAPH,CAOQ,kBAAgB,wCAAdC,GAAc,aAATC,GAAS;AACpB,oBAAIA,GAAG,CAACE,IAAJ,KAAa,CAAjB,EAAoB;AAChB;AACH,iBAFD,MAEO;AACH;AACH;AACJ,eAbD,EA5HQ;;;AA4IZ;AACMmB,gBA7IM;AA8Ia7B,oBA9Ib,UA8IaA,MA9Ib;;AAgJaoB,sBAhJb,UAgJaA,QAhJb;AAiJaE,4BAjJb,UAiJaA,cAjJb;AAkJaD,uBAlJb,UAkJaA,SAlJb;;AAoJR;AACArB,oBAAM,CAAC,YAAD,EAAe;AACjBoB,wBAAQ,EAARA,QADiB;AAEjBE,8BAAc,EAAdA,cAFiB;AAGjBD,yBAAS,EAATA,SAHiB,EAAf,CAAN;;AAKA;AACAnB,iBAAG,CAACC,OAAJ,CAAY;AACRC,mBAAG,EAAE,iDADG,EACgD;AACxDM,oBAAI,EAAE;AACFoB,sBAAI,EAAER,cADJ;AAEFS,wBAAM,EAAEX,QAFN,EAFE;;AAMRO,sBAAM,EAAE;AACJ,kCAAgB,kBADZ,EANA;;AASRD,sBAAM,EAAE,MATA,EAAZ;AAUGpB,kBAVH,CAUQ,kBAAgB,wCAAdC,GAAc,aAATC,GAAS;AACpB,oBAAIwB,SAAS,GAAGxB,GAAG,CAACE,IAApB;AACA;AACA,oBAAIsB,SAAS,CAACC,IAAV,KAAmB,MAAvB,EAA+B;AAC3BjC,wBAAM,CAAC,YAAD,EAAe;AACjBoB,4BAAQ,EAARA,QADiB;AAEjBE,kCAAc,EAAEU,SAAS,CAACE,IAFT;AAGjBb,6BAAS,EAAE,CAACA,SAHK,EAAf,CAAN;;AAKH,iBAND,MAMO,IAAIW,SAAS,CAACC,IAAV,KAAmB,MAAvB,EAA+B;AAClC,sBAAIvB,IAAI,GAAGsB,SAAS,CAACE,IAAV,GAAiBF,SAAS,CAAC5B,GAAtC;AACAJ,wBAAM,CAAC,YAAD,EAAe;AACjBoB,4BAAQ,EAARA,QADiB;AAEjBE,kCAAc,EAAEZ,IAFC;AAGjBW,6BAAS,EAAE,CAACA,SAHK,EAAf,CAAN;;AAKH,iBAPM,MAOA,IAAIW,SAAS,CAACC,IAAV,KAAmB,MAAvB,EAA+B;AAClCjC,wBAAM,CAAC,YAAD,EAAe;AACjBoB,4BAAQ,EAARA,QADiB;AAEjBE,kCAAc,EAAE,UAFC;AAGjBD,6BAAS,EAAE,CAACA,SAHK,EAAf,CAAN;;AAKH,iBANM,MAMA;AACHrB,wBAAM,CAAC,YAAD,EAAe;AACjBoB,4BAAQ,EAARA,QADiB;AAEjBE,kCAAc,EAAE,UAFC;AAGjBD,6BAAS,EAAE,CAACA,SAHK,EAAf,CAAN;;AAKH;AACJ,eAvCD,EA3JQ;;;AAqMNc,cArMM;AAsMWlC,mBAtMX,UAsMWA,KAtMX;;AAwMFmC,2BAxME,GAwMc;AAClBb,sBAAM,EAAEtB,KAAK,CAACQ,IAAN,CAAW4B,EADD;AAElBjB,wBAAQ,EAAEnB,KAAK,CAACqC,QAAN,CAAeD,EAFP,EAxMd;;AA4MFE,2BA5ME,GA4Mc;AAClBhB,sBAAM,EAAEtB,KAAK,CAACqC,QAAN,CAAeD,EADL;AAElBjB,wBAAQ,EAAEnB,KAAK,CAACQ,IAAN,CAAW4B,EAFH,EA5Md;;AAgNRpC,mBAAK,CAACU,OAAN,CAAc6B,IAAd,CAAmBvC,KAAK,CAACqC,QAAzB;AACArC,mBAAK,CAACqC,QAAN,GAAiB,EAAjB;AACA;AACApC,iBAAG,CAACC,OAAJ,CAAY;AACRC,mBAAG,EAAE,mDADG;AAERM,oBAAI,EAAE0B,aAFE;AAGRV,sBAAM,EAAE,MAHA;AAIRC,sBAAM,EAAE;AACJ,kCAAgB,kBADZ,EAJA,EAAZ;;AAOGrB,kBAPH,CAOQ,kBAAgB,wCAAdC,GAAc,aAATC,GAAS;AACpB,oBAAIA,GAAG,CAACE,IAAJ,KAAa,CAAjB,EAAoB;AACnB,iBADD,MACO;AACH+B,yBAAO,CAACC,GAAR,CAAYnC,GAAZ;AACH;AACJ,eAZD;AAaA;AACAL,iBAAG,CAACC,OAAJ,CAAY;AACRC,mBAAG,EAAE,mDADG;AAERM,oBAAI,EAAE6B,aAFE;AAGRb,sBAAM,EAAE,MAHA;AAIRC,sBAAM,EAAE;AACJ,kCAAgB,kBADZ,EAJA,EAAZ;;AAOGrB,kBAPH,CAOQ,kBAAgB,wCAAdC,GAAc,aAATC,GAAS;AACpB,oBAAIA,GAAG,CAACE,IAAJ,KAAa,CAAjB,EAAoB;AACnB,iBADD,MACO;AACH;AACH;AACJ,eAZD,EAjOQ,qKAAhB,C;;;;;;AAmPeb,O;;;;;;;;;;;;;wFCzPf;;AAEA,IAAM8C,OAAO,GAAG;AACZ;AACAC,QAFY,kBAEL3C,KAFK,EAEE;AACV,QAAIA,KAAK,CAACU,OAAN,CAAcpB,MAAd,GAAuB,CAA3B,EAA8B;AAC1B,aAAOU,KAAK,CAACU,OAAN,CAAckC,IAAd,CAAmB,UAAAC,CAAC,UAAIA,CAAC,CAACT,EAAF,KAASpC,KAAK,CAAC8C,QAAnB,EAApB,CAAP;AACH;AACJ,GANW;AAOZ;AACAC,gBARY,0BAQG/C,KARH,EAQS;AACjB,WAAOA,KAAK,CAACgD,WAAN,CAAkBJ,IAAlB,CAAuB,UAAAC,CAAC,UAAIA,CAAC,CAAC1B,QAAF,KAAenB,KAAK,CAAC8C,QAAzB,EAAxB;AACD9C,SAAK,CAACgD,WAAN,CAAkBJ,IAAlB,CAAuB,UAAAC,CAAC,UAAIA,CAAC,CAAC1B,QAAF,KAAenB,KAAK,CAAC8C,QAAzB,EAAxB,EAA2DG,IAD1D;AAED,MAFN;AAGJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACC,GAxBW,EAAhB,C;;;AA2BeP,O;;;;;;;;;;;;;AC5Bf,6H,8FADA;AAEA,IAAMQ,SAAS,GAAG;AACjBC,QADiB,kBACVnD,KADU,EACH;AACbA,SAAK,CAACa,QAAN,GAAiB,KAAjB;AACA;AACAZ,OAAG,CAACmD,WAAJ;AACA,QAAI;AACHnD,SAAG,CAACoD,iBAAJ,CAAsB,UAAtB;AACA,KAFD,CAEE,OAAOrC,CAAP,EAAU;AACX;AACA;AACA;AACD,GAXgB;AAYjBsC,SAZiB,mBAYTtD,KAZS,EAYFQ,IAZE,EAYI;AACpBR,SAAK,CAACQ,IAAN,GAAaA,IAAb;AACA,GAdgB;AAejB;AACA+C,YAhBiB,sBAgBNvD,KAhBM,EAgBCU,OAhBD,EAgBU;AAC1BV,SAAK,CAACU,OAAN,GAAgBA,OAAhB;AACA,GAlBgB;AAmBjB8C,cAnBiB,wBAmBJxD,KAnBI;;;AAsBd,OAFFmB,QAEE,QAFFA,QAEE,CADFsC,KACE,QADFA,KACE;;AAEFzD,SAAK,CAACU,OAAN,CAAcgD,OAAd,CAAsB,UAACf,MAAD,EAAY;AACjC,UAAIA,MAAM,CAACP,EAAP,KAAcjB,QAAlB,EAA4B;AAC3BwB,cAAM,CAACgB,OAAP,GAAiBF,KAAjB;AACAjB,eAAO,CAACC,GAAR;AACA;AACA;AACD,KAND;;AAQA,GAhCgB;AAiCjBmB,YAjCiB,sBAiCN5D,KAjCM,EAiCCyD,KAjCD,EAiCQ;AACxBzD,SAAK,CAACQ,IAAN,CAAWmD,OAAX,GAAqBF,KAArB;AACA,GAnCgB;AAoCjBI,gBApCiB,0BAoCF7D,KApCE,EAoCKgD,WApCL,EAoCkB;AAClChD,SAAK,CAACgD,WAAN,GAAoBhD,KAAK,CAAC8D,aAAN,GAAsBd,WAA1C;AACA,GAtCgB;AAuCjBe,cAvCiB,wBAuCJ/D,KAvCI,EAuCGgE,MAvCH,EAuCW;AAC3BhE,SAAK,CAACiE,UAAN,GAAmBD,MAAnB;;AAEA,GA1CgB;AA2CjB;AACAE,aA5CiB,uBA4CLlE,KA5CK,EA4CE8C,QA5CF,EA4CY;AAC5B9C,SAAK,CAAC8C,QAAN,GAAiBA,QAAjB;AACA,GA9CgB;AA+CjBqB,aA/CiB,uBA+CLnE,KA/CK,EA+CCqC,QA/CD,EA+CU;AACpBrC,SAAK,CAACqC,QAAN,GAAiBA,QAAjB;AACN,GAjDgB;AAkDjB;AACA+B,YAnDiB,sBAmDNpE,KAnDM,EAmDCqE,GAnDD,EAmDM;AACtB,QAAIC,OAAO,GAAGC,cAAKjH,OAAL,CAAa,qBAAb,CAAd;AACA;;AAEA,QAAI0C,KAAK,CAACgD,WAAN,CAAkBJ,IAAlB,CAAuB,UAAAC,CAAC,UAAIA,CAAC,CAAC1B,QAAF,KAAekD,GAAG,CAAClD,QAAvB,EAAxB,MAA6DqD,SAAjE,EAA4E;AAC3ExE,WAAK,CAACgD,WAAN,CAAkBT,IAAlB,CAAuB;AACtB,oBAAY8B,GAAG,CAAClD,QADM;AAEtB8B,YAAI,EAAE,EAFgB,EAAvB;;AAIA;AACD;AACA;AACA,QAAI,CAACoB,GAAG,CAACjD,SAAT,EAAoB;AACnB;AACApB,WAAK,CAACgD,WAAN,CAAkBU,OAAlB,CAA0B,UAACe,IAAD,EAAOC,KAAP,EAAcC,GAAd,EAAsB;AAC/C,YAAIF,IAAI,CAACtD,QAAL,KAAkBkD,GAAG,CAAClD,QAA1B,EAAoC;AACnC;AACAsD,cAAI,CAACxB,IAAL,CAAUV,IAAV,CAAe;AACdnB,qBAAS,EAAEiD,GAAG,CAACjD,SADD;AAEdC,0BAAc,EAAEgD,GAAG,CAAChD,cAFN;AAGdiD,mBAAO,EAAPA,OAHc,EAAf;;AAKA;AACD,OATD;AAUA,KAZD,MAYO;AACN;AACAtE,WAAK,CAACgD,WAAN,CAAkBU,OAAlB,CAA0B,UAACe,IAAD,EAAOC,KAAP,EAAcC,GAAd,EAAsB;AAC/C,YAAIF,IAAI,CAACtD,QAAL,KAAkBkD,GAAG,CAAClD,QAA1B,EAAoC;AACnC;AACA;AACAsD,cAAI,CAACxB,IAAL,CAAUV,IAAV,CAAe;AACdnB,qBAAS,EAAEiD,GAAG,CAACjD,SADD;AAEdC,0BAAc,EAAEgD,GAAG,CAAChD,cAFN;AAGdiD,mBAAO,EAAPA,OAHc,EAAf;;AAKA;AACD,OAVD;AAWA;AACD,GAzFgB;AA0FjB;AACAM,eA3FiB,yBA2FH5E,KA3FG;;AA6Fd,OADFoC,EACE,SADFA,EACE;AACFpC,SAAK,CAACgD,WAAN,CAAkBU,OAAlB,CAA0B,UAACe,IAAD,EAAOC,KAAP,EAAcC,GAAd,EAAsB;AAC/C;AACA,UAAIF,IAAI,CAACtD,QAAL,KAAkBiB,EAAtB,EAA0B;AACzBuC,WAAG,CAACE,MAAJ,CAAWH,KAAX,EAAkB,CAAlB;AACA;AACA;AACA;AACA;AACD,KARD;AASA,GAvGgB,EAAlB,C;;;AA0GexB,S;;;;;;;;;;;;;wFC5Gf;AACA,IAAMlD,KAAK,GAAG;AACb;AACAa,UAAQ,EAAE,KAFG;AAGbT,SAAO,EAAE,CAHI;AAIbO,eAAa,EAAC,EAJD;AAKbsD,YAAU,EAAC,KALE;AAMb;AACAvD,SAAO,EAAC,EAPK;AAQbF,MAAI,EAAC,EARQ;AASb;AACAsC,UAAQ,EAAE,CAVG;AAWbhC,QAAM,EAAC,KAXM;AAYb;AACA;AACA;AACAkC,aAAW,EAAE,EAfA;AAgBb;AACAc,eAAa,EAAE,EAjBF;AAkBbzB,UAAQ,EAAC,EAlBI,EAAd,C;;;AAqBerC,K;;;;;;;;;;;;uFCtBf;AACA;;AAEA;AACA;AACA;AACA,8H,6FAJApD,aAAIkI,GAAJ,CAAQC,aAAR,E;AAKe,IAAIA,cAAKC,KAAT,CAAe;AAC5BhF,OAAK,EAALA,cAD4B;AAE5BkD,WAAS,EAATA,kBAF4B;AAG5BR,SAAO,EAAPA,gBAH4B;AAI5B9C,SAAO,EAAPA,gBAJ4B,EAAf,C;;;;;;;;;;;;;ACNf,oF;AACe;AACXqF,UAAQ;AACD,sBAAS,CAAC,SAAD,CAAT,CADC,CADG;;AAIXC,UAAQ,EAAE,oBAAW;AACjB;AACA;AACAjF,OAAG,CAACkF,YAAJ,CAAiB,UAAA5E,GAAG,EAAI;AACpB,WAAI,CAACwD,YAAL,CAAkB,IAAlB;AACA;AACH,KAHD;AAIA;AACA9D,OAAG,CAACmF,aAAJ,CAAkB,UAAA7E,GAAG,EAAI;AACrB;AACH,KAFD;AAGA;AACAN,OAAG,CAACoF,aAAJ,CAAkB,UAAA9E,GAAG,EAAI;AACrB,WAAI,CAACwD,YAAL,CAAkB,KAAlB;AACA;AACH,KAHD;AAIA;AACA9D,OAAG,CAACqF,eAAJ,CAAoB,UAAA/E,GAAG,EAAI;AACvB,UAAIA,GAAG,CAACE,IAAJ,KAAa,MAAjB,EAAyB;AACrB,YAAM8E,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWlF,GAAG,CAACE,IAAf,CAAb;AACA;AACA,YAAMwC,IAAI,GAAG;AACT9B,kBAAQ,EAAEoE,IAAI,CAACjE,MADN;AAETD,wBAAc,EAAEkE,IAAI,CAAClE,cAFZ;AAGTD,mBAAS,EAAE,IAHF,EAAb;;AAKA,YAAI,KAAI,CAACV,OAAL,CAAakC,IAAb,CAAkB,UAAAC,CAAC,UAAIA,CAAC,CAACT,EAAF,KAASa,IAAI,CAAC9B,QAAlB,EAAnB,MAAmDqD,SAAvD,EAAkE;AAC9D,eAAI,CAAC1H,MAAL,CAAY4I,QAAZ,CAAqB,YAArB;AACH,SAFD,MAEO;AACH,eAAI,CAACtB,UAAL,CAAgBnB,IAAhB;AACH;AACJ;AACJ,KAfD;AAgBH,GArCU;AAsCX0C,QAAM,EAAE,kBAAW;AACf;AACH,GAxCU;AAyCXC,QAAM,EAAE,kBAAW;AACf,QAAI;AACA3F,SAAG,CAACc,cAAJ,CAAmB,UAAnB,EAA+B,KAAKjE,MAAL,CAAYkD,KAA3C;AACA;AACH,KAHD,CAGE,OAAOgB,CAAP,EAAU;AACR;AACH;AACJ,GAhDU;AAiDX6E,SAAO;AACA,0BAAa,CAAC,YAAD,EAAe,cAAf,CAAb,CADA,CAjDI,E;;;;;;;;;;;;ACFf,uC","file":"common/main.js","sourcesContent":["var render, staticRenderFns\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../Hbuilder-X/HBuilderX-11-26/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"G:\\\\Hbuilder-X\\\\HBuilderX-11-26\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('32bcb883', component.options)\n    } else {\n      api.reload('32bcb883', component.options)\n    }\n    \n  }\n}\ncomponent.options.__file = \"vue/my_unip_app/qq/App.vue\"\nexport default component.exports","import mod from \"-!../../../Hbuilder-X/HBuilderX-11-26/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../Hbuilder-X/HBuilderX-11-26/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../Hbuilder-X/HBuilderX-11-26/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!../../../Hbuilder-X/HBuilderX-11-26/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../Hbuilder-X/HBuilderX-11-26/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../Hbuilder-X/HBuilderX-11-26/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../Hbuilder-X/HBuilderX-11-26/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../Hbuilder-X/HBuilderX-11-26/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!../../../Hbuilder-X/HBuilderX-11-26/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../Hbuilder-X/HBuilderX-11-26/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../Hbuilder-X/HBuilderX-11-26/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../Hbuilder-X/HBuilderX-11-26/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../Hbuilder-X/HBuilderX-11-26/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../Hbuilder-X/HBuilderX-11-26/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../Hbuilder-X/HBuilderX-11-26/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-3!../../../Hbuilder-X/HBuilderX-11-26/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../Hbuilder-X/HBuilderX-11-26/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../Hbuilder-X/HBuilderX-11-26/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../Hbuilder-X/HBuilderX-11-26/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../Hbuilder-X/HBuilderX-11-26/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../Hbuilder-X/HBuilderX-11-26/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-3!../../../Hbuilder-X/HBuilderX-11-26/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import 'uni-pages';\r\nimport Vue from 'vue'\r\nimport App from './App'\r\nimport store from './vuex/store'\r\nVue.prototype.$store = store\r\nVue.config.productionTip = false\r\nApp.mpType = 'app'\r\nconst app = new Vue({\r\n\t...App\r\n})\r\napp.$mount()","export default {\r\n\tnowDate(format) {\r\n\t\tlet date = Date.now();\r\n\r\n\t\tfunction add0(m) {\r\n\t\t\treturn m < 10 ? '0' + m : m\r\n\t\t}\r\n\t\tlet time = new Date(parseInt(date));\r\n\t\tlet y = time.getFullYear();\r\n\t\tlet m = time.getMonth() + 1;\r\n\t\tlet d = time.getDate();\r\n\t\tlet h = time.getHours();\r\n\t\tlet mm = time.getMinutes();\r\n\t\tlet s = time.getSeconds();\r\n\t\tif (format == 'yyyy-mm-dd hh:mm:ss') {\r\n\t\t\treturn y + '-' + add0(m) + '-' + add0(d) + ' ' + add0(h) + ':' + add0(mm) + ':' + add0(s);\r\n\t\t} else {\r\n\t\t\treturn y + '-' + add0(m) + '-' + add0(d);\r\n\t\t}\r\n\t},\r\n\tformatTimeStamp(fmt, timestamp) {\r\n\t\t//author: meizz\r\n\t\ttimestamp = new Date(parseInt(timestamp))\r\n\t\tlet o = {\r\n\t\t\t\"M+\": timestamp.getMonth() + 1, //月份\r\n\t\t\t\"d+\": timestamp.getDate(), //日\r\n\t\t\t\"h+\": timestamp.getHours(), //小时\r\n\t\t\t\"m+\": timestamp.getMinutes(), //分\r\n\t\t\t\"s+\": timestamp.getSeconds(), //秒\r\n\t\t\t\"q+\": Math.floor((timestamp.getMonth() + 3) / 3), //季度\r\n\t\t\t\"S\": timestamp.getMilliseconds() //毫秒\r\n\t\t}\r\n\t\tif (/(y+)/.test(fmt))\r\n\t\t\tfmt = fmt.replace(RegExp.$1, (timestamp.getFullYear() + \"\").substr(4 - RegExp.$1.length))\r\n\t\tfor (let k in o)\r\n\t\t\tif (new RegExp(\"(\" + k + \")\").test(fmt))\r\n\t\t\t\tfmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)))\r\n\t\treturn fmt\r\n\t},\r\n\r\n\tformatSyl(val) {\r\n\t\tif (val) {} else {\r\n\t\t\tval = 0\r\n\t\t}\r\n\t\tif (val == 0) {\r\n\t\t\treturn '--'\r\n\t\t} else {\r\n\t\t\treturn val.toFixed(2)\r\n\t\t}\r\n\t},\r\n\t//取整\r\n\tformatVol(val) {\r\n\t\tif (val == 0) {\r\n\t\t\treturn '--'\r\n\t\t} else {\r\n\t\t\treturn val.toFixed(0)\r\n\t\t}\r\n\t}\r\n}\r\n","// actions里存放的是异步操作\r\n// 由于vuex中的state的变更只能由mutations进行操作，所以actions不直接进行数据操作，而是调用mutations方法\r\n// 以下出现的that都是vue实例对象，因为把axios绑定在了Vue原型上，vuex无法调用，所以这里需要传入this\r\n\r\nimport store from \"./store\"\r\n\r\nconst actions = {\r\n    // 异步获取基础数据\r\n    // 这里使用了es7的async函数，相当于封装了promis的generator\r\n    async Login({\r\n                    commit,\r\n                    state\r\n                }, userInfo) {\r\n        //获取自己的数据\r\n        await uni.request({\r\n            url: 'http://zhangzibao.xyz:8080/myqqServer/api/user/' + userInfo.user_id, //仅为示例，并非真实接口地址。\r\n        }).then(([err, res]) => {\r\n            state.self = res.data\r\n        })\r\n        //获取朋友的数据\r\n        await uni.request({\r\n            url: 'http://zhangzibao.xyz:8080/myqqServer/api/friends/' + userInfo.user_id, //仅为示例，并非真实接口地址。\r\n        }).then(([err, res]) => {\r\n            state.friends = res.data\r\n        })\r\n        await uni.request({\r\n            url: 'http://zhangzibao.xyz:8080/myqqServer/api/message/' + userInfo.user_id, //仅为示例，并非真实接口地址。\r\n        }).then(([err, res]) => {\r\n            commit(\"setMessageList\", res.data)\r\n\r\n        })\r\n        state.Authorization = userInfo.token\r\n        state.user_id = userInfo.user_id\r\n        state.hasLogin = true\r\n        state.isAjax = true\r\n        // 存入缓存\r\n        try {\r\n            uni.setStorageSync('userInfo', state)\r\n            // console.log(\"登录后更新数据\")\r\n        } catch (e) {\r\n            // error\r\n            // console.log(e)\r\n        }\r\n    },\r\n    async updateData({\r\n                         commit,\r\n                         state\r\n                     }) {\r\n        await uni.request({\r\n            url: 'http://zhangzibao.xyz:8080/myqqServer/api/friends/' + state.user_id, //仅为示例，并非真实接口地址。\r\n        }).then(([err, res]) => {\r\n            state.friends = res.data\r\n        })\r\n        await uni.request({\r\n            url: 'http://zhangzibao.xyz:8080/myqqServer/api/message/' + state.user_id, //仅为示例，并非真实接口地址。\r\n        }).then(([err, res]) => {\r\n            commit(\"setMessageList\", res.data)\r\n        })\r\n        try {\r\n            uni.setStorageSync('userInfo', state)\r\n            // console.log(\"数据更新成功\")\r\n        } catch (e) {\r\n            // error\r\n        }\r\n    },\r\n    // 正常聊天\r\n    async addMessage({\r\n                         commit\r\n                     }, {\r\n                         friendId,\r\n                         isreceive,\r\n                         messageContent\r\n                     }) {\r\n        const userId = store.state.user_id\r\n        const sender = {\r\n            userId,\r\n            friendId,\r\n            isreceive,\r\n            messageContent\r\n        }\r\n        const reciver = {\r\n            userId: friendId,\r\n            friendId: userId,\r\n            isreceive: !isreceive,\r\n            messageContent\r\n        }\r\n        // 提交到我方消息记录\r\n        uni.request({\r\n            url: \"http://zhangzibao.xyz:8080/myqqServer/api/addmessage\",\r\n            data: sender,\r\n            method: \"POST\",\r\n            header: {\r\n                'content-type': 'application/json'\r\n            }\r\n        }).then(([err, res]) => {\r\n            if (res.data === 1) {\r\n                // console.log('已发送消息')\r\n                commit('changeList', {\r\n                    friendId,\r\n                    messageContent,\r\n                    isreceive\r\n                })\r\n            } else {\r\n                commit('changeList', {\r\n                    friendId,\r\n                    messageContent: '发送失败',\r\n                    isreceive\r\n                })\r\n                // console.log(err)\r\n            }\r\n        })\r\n        //向对方发送消息\r\n        uni.request({\r\n            url: 'http://zhangzibao.xyz:8080/myqqServer/socket/push/' + friendId, //仅为示例，并非真实接口地址。\r\n            data: {\r\n                userId,\r\n                messageContent\r\n            },\r\n            header: {\r\n                'content-type': 'application/json'\r\n            },\r\n            method: 'POST'\r\n        }).then(([err, res]) => {\r\n            if (res.statusCode === 200) {\r\n                // console.log(\"success:\", res.data)\r\n            } else {\r\n                // console.log(\"failed\", res.data)\r\n            }\r\n        })\r\n        //提交到对方消息记录\r\n        uni.request({\r\n            url: \"http://zhangzibao.xyz:8080/myqqServer/api/addmessage\",\r\n            data: reciver,\r\n            method: \"POST\",\r\n            header: {\r\n                'content-type': 'application/json'\r\n            }\r\n        }).then(([err, res]) => {\r\n            if (res.data === 1) {\r\n                // console.log('对方已收到消息')\r\n            } else {\r\n                // console.log(err)\r\n            }\r\n        })\r\n\r\n    },\r\n    // 聊天机器人\r\n    async sendRobotValue({\r\n                             commit\r\n                         }, {\r\n                             friendId,\r\n                             messageContent,\r\n                             isreceive\r\n                         }) {\r\n        // 我发过去的消息\r\n        commit('changeList', {\r\n            friendId,\r\n            messageContent,\r\n            isreceive\r\n        })\r\n        // 机器人发过来消息\r\n        uni.request({\r\n            url: 'http://zhangzibao.xyz:8080/myqqServer/api/robot', //仅为示例，并非真实接口地址。\r\n            data: {\r\n                info: messageContent,\r\n                userid: friendId\r\n            },\r\n            header: {\r\n                'content-type': 'application/json'\r\n            },\r\n            method: \"POST\"\r\n        }).then(([err, res]) => {\r\n            let robotData = res.data\r\n            // 判断获取到的数据类型，在进行对应操作\r\n            if (robotData.code === 100000) {\r\n                commit('changeList', {\r\n                    friendId,\r\n                    messageContent: robotData.text,\r\n                    isreceive: !isreceive\r\n                })\r\n            } else if (robotData.code === 200000) {\r\n                let data = robotData.text + robotData.url\r\n                commit('changeList', {\r\n                    friendId,\r\n                    messageContent: data,\r\n                    isreceive: !isreceive\r\n                })\r\n            } else if (robotData.code === 302000) {\r\n                commit('changeList', {\r\n                    friendId,\r\n                    messageContent: '暂不支持此类对话',\r\n                    isreceive: !isreceive\r\n                })\r\n            } else {\r\n                commit('changeList', {\r\n                    friendId,\r\n                    messageContent: '暂不支持此类对话',\r\n                    isreceive: !isreceive\r\n                })\r\n            }\r\n        })\r\n\r\n    },\r\n    async addnewfriend({\r\n                           state\r\n                       }) {\r\n        const me_and_friend = {\r\n            userId: state.self.id,\r\n            friendId: state.stranger.id\r\n        }\r\n        const friend_and_me = {\r\n            userId: state.stranger.id,\r\n            friendId: state.self.id,\r\n        }\r\n        state.friends.push(state.stranger)\r\n        state.stranger = {}\r\n        // 加对方为好友\r\n        uni.request({\r\n            url: \"http://zhangzibao.xyz:8080/myqqServer/api/friends\",\r\n            data: me_and_friend,\r\n            method: \"POST\",\r\n            header: {\r\n                'content-type': 'application/json'\r\n            }\r\n        }).then(([err, res]) => {\r\n            if (res.data === 1) {\r\n            } else {\r\n                console.log(err)\r\n            }\r\n        })\r\n        //好友位都添加\r\n        uni.request({\r\n            url: \"http://zhangzibao.xyz:8080/myqqServer/api/friends\",\r\n            data: friend_and_me,\r\n            method: \"POST\",\r\n            header: {\r\n                'content-type': 'application/json'\r\n            }\r\n        }).then(([err, res]) => {\r\n            if (res.data === 1) {\r\n            } else {\r\n                // console.log(err)\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default actions\r\n","// 类似计算数据，根据state的数据，筛选或者暴露一格新数据\r\n\r\nconst getters = {\r\n    // 根据当前选中的朋友的id来筛选出当前的friend的具体数据\r\n    friend(state) {\r\n        if (state.friends.length > 0) {\r\n            return state.friends.find(x => x.id === state.activeId)\r\n        }\r\n    },\r\n    // 对当前消息队列中的消息进行加工，添加对应的好友资料\r\n    nowMessageList(state){\r\n        return state.messageList.find(x => x.friendId === state.activeId)\r\n            ? state.messageList.find(x => x.friendId === state.activeId).list\r\n            : []\r\n    // let list = state.messageList\r\n    // \tlist.forEach(x => {\r\n    // \t\t// 由id筛选出对应的好友\r\n    // \t\tx.friend = state.friends.find(i => i.id === x.friendId)\r\n    // \t\tif(x.top === undefined){\r\n    // \t\t\tx.top = 0\r\n    // \t\t}\r\n    //         if(x.slide_x === undefined){\r\n    //             x.slide_x = 0\r\n    //         }\r\n    // \t})\r\n    // \treturn list\r\n    }\r\n}\r\n\r\nexport default getters\r\n","// vuex中state的数据只能被mutations方法所更改\r\nimport util from '../utils/util';\r\nconst mutations = {\r\n\tlogout(state) {\r\n\t\tstate.hasLogin = false;\r\n\t\t// 关闭长链接\r\n\t\tuni.closeSocket()\r\n\t\ttry {\r\n\t\t\tuni.removeStorageSync('userInfo');\r\n\t\t} catch (e) {\r\n\t\t\t// error\r\n\t\t\t// console.log(e)\r\n\t\t}\r\n\t},\r\n\tgetself(state, self) {\r\n\t\tstate.self = self\r\n\t},\r\n\t// ajax获取到用户数据\r\n\tgetfriends(state, friends) {\r\n\t\tstate.friends = friends\r\n\t},\r\n\tchangefriend(state, {\r\n\t\tfriendId,\r\n\t\tvalue\r\n\t}) {\r\n\r\n\t\tstate.friends.forEach((friend) => {\r\n\t\t\tif (friend.id === friendId) {\r\n\t\t\t\tfriend.uAvatar = value\r\n\t\t\t\tconsole.log()\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t},\r\n\tchangeSelf(state, value) {\r\n\t\tstate.self.uAvatar = value\r\n\t},\r\n\tsetMessageList(state, messageList) {\r\n\t\tstate.messageList = state.messageListFB = messageList\r\n\t},\r\n\tchangesocket(state, status) {\r\n\t\tstate.socketOpen = status;\r\n\r\n\t},\r\n\t// 获取当前获得关注的朋友的id\r\n\tgetActiveId(state, activeId) {\r\n\t\tstate.activeId = activeId\r\n\t},\r\n\tsetStranger(state,stranger){\r\n        state.stranger = stranger\r\n\t},\r\n\t// 消息队列，聊天队列处理\r\n\tchangeList(state, obj) {\r\n\t\tlet addTime = util.nowDate(\"yyyy-mm-dd hh:mm:ss\")\r\n\t\t// 判断有没有聊天队列，没有就加一条\r\n\r\n\t\tif (state.messageList.find(x => x.friendId === obj.friendId) === undefined) {\r\n\t\t\tstate.messageList.push({\r\n\t\t\t\t\"friendId\": obj.friendId,\r\n\t\t\t\tlist: []\r\n\t\t\t})\r\n\t\t}\r\n\t\t// console.log(state.messageList)\r\n\t\t// 判断信息是自己的还是ai的，然后插入聊天队列中\r\n\t\tif (!obj.isreceive) {\r\n\t\t\t// 信息是自己发送的\r\n\t\t\tstate.messageList.forEach((item, index, arr) => {\r\n\t\t\t\tif (item.friendId === obj.friendId) {\r\n\t\t\t\t\t// obj.friendId = 0\r\n\t\t\t\t\titem.list.push({\r\n\t\t\t\t\t\tisreceive: obj.isreceive,\r\n\t\t\t\t\t\tmessageContent: obj.messageContent,\r\n\t\t\t\t\t\taddTime\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\t// 信息是ai发送的\r\n\t\t\tstate.messageList.forEach((item, index, arr) => {\r\n\t\t\t\tif (item.friendId === obj.friendId) {\r\n\t\t\t\t\t// console.log(obj)\r\n\t\t\t\t\t// obj.friendId = 0\r\n\t\t\t\t\titem.list.push({\r\n\t\t\t\t\t\tisreceive: obj.isreceive,\r\n\t\t\t\t\t\tmessageContent: obj.messageContent,\r\n\t\t\t\t\t\taddTime\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\t// 删除消息\r\n\tremoveMessage(state, {\r\n\t\tid\r\n\t}) {\r\n\t\tstate.messageList.forEach((item, index, arr) => {\r\n\t\t\t// 判断信息列表中id与正在删除的信息id是否相同，如果相同，就删除信息\r\n\t\t\tif (item.friendId === id) {\r\n\t\t\t\tarr.splice(index, 1)\r\n\t\t\t\t// console.log(id)\r\n\t\t\t\t// console.log(index)\r\n\t\t\t\t// console.log(state.messageList)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport default mutations\r\n","// 初始化一些常用数据，根据vue的理念，使用到的数据都必须先进行初始化设置。\r\nconst state = {\r\n\t// 长链接是否打开\r\n\thasLogin: false,\r\n\tuser_id: 0,\r\n\tAuthorization:\"\",\r\n\tsocketOpen:false,\r\n\t// 初始化基础数据\r\n\tfriends:[],\r\n\tself:{},\r\n\t// 当前被选中或者在聊天中的friend的id\r\n\tactiveId: 0,\r\n\tisAjax:false,\r\n\t// 聊天队列，这里为每个朋友添加了一个聊天队列，偷懒写法，如果有需要可以改成动态添加\r\n\t// id是作为聊天队列的标记，list是聊天内容，list里的数据格式{id:xx, message:xxx},组件内会根据id来将对话插入\r\n\t// 到左边，还是右边，判断message是自己还是ai发出的\r\n\tmessageList: {},\r\n\t// 消息队列副本，由于没有数据库，所以采用这样折中的方法\r\n\tmessageListFB: {},\r\n\tstranger:{}\r\n}\r\n\r\nexport default state\r\n","import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nVue.use(Vuex)\r\nimport state from './state'\r\nimport mutations from './mutations'\r\nimport getters from './getters'\r\nimport actions from './actions'\r\nexport default new Vuex.Store({\r\n  state,\r\n  mutations,\r\n  getters,\r\n  actions\r\n})","\r\nimport { mapMutations, mapState } from 'vuex';\r\nexport default {\r\n    computed: {\r\n        ...mapState(['friends'])\r\n    },\r\n    onLaunch: function() {\r\n        // console.log('App Launch');\r\n        //监听链接打开\r\n        uni.onSocketOpen(res => {\r\n            this.changesocket(true);\r\n            // console.log('WebSocket连接已打开！');\r\n        });\r\n        //监听链接错误\r\n        uni.onSocketError(res => {\r\n            // console.log('WebSocket连接打开失败，请检查！');\r\n        });\r\n        // 监听关闭\r\n        uni.onSocketClose(res => {\r\n            this.changesocket(false);\r\n            // console.log('WebSocket 已关闭！');\r\n        });\r\n        //监听服务端传来的消息\r\n        uni.onSocketMessage(res => {\r\n            if (res.data !== '连接成功') {\r\n                const json = JSON.parse(res.data);\r\n                // console.log(json);\r\n                const list = {\r\n                    friendId: json.userId,\r\n                    messageContent: json.messageContent,\r\n                    isreceive: true\r\n                };\r\n                if (this.friends.find(x => x.id === list.friendId) === undefined) {\r\n                    this.$store.dispatch('updateData');\r\n                } else {\r\n                    this.changeList(list);\r\n                }\r\n            }\r\n        })\r\n    },\r\n    onShow: function() {\r\n        // console.log('App Show');\r\n    },\r\n    onHide: function() {\r\n        try {\r\n            uni.setStorageSync('userInfo', this.$store.state);\r\n            // console.log('app进入后台并更新缓存');\r\n        } catch (e) {\r\n            // error\r\n        }\r\n    },\r\n    methods: {\r\n        ...mapMutations(['changeList', 'changesocket'])\r\n    }\r\n};\r\n","// extracted by mini-css-extract-plugin"],"sourceRoot":""}