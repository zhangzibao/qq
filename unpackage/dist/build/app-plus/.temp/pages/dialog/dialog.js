require("../../common/manifest.js");
require("../../common/vendor.js");
global.webpackJsonp([0],{56:function(t,e,n){"use strict";var s=a(n(3)),i=a(n(57));function a(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(i.default))},57:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(59),i=n.n(s),a=n(76);var r=function(t){n(58)},o=n(0)(i.a,a.a,r,"data-v-54e285d0",null);e.default=o.exports},58:function(t,e){},59:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},i=o(n(60)),a=o(n(72)),r=n(2);function o(t){return t&&t.__esModule?t:{default:t}}e.default={computed:s({},(0,r.mapGetters)(["friend","nowMessageList"]),(0,r.mapState)(["self","messageList"]),{userData:function(){return{self:this.self,friend:this.friend}},style:function(){return{pageHeight:t.getSystemInfoSync().windowHeight,contentViewHeight:t.getSystemInfoSync().windowHeight}}}),onBackPress:function(){return t.switchTab({url:"../main/main"}),!0},onNavigationBarButtonTap:function(e){t.showToast({title:"菜单"})},data:function(){return{messageList_x:[],animation_switch:!1,message_content:"",scrollTop:0}},watch:{nowMessageList:function(t,e){this.messageList_x.push(this.nowMessageList[this.nowMessageList.length-1]),this.scrollToBottom()}},onReady:function(){var t=this;this.scrollToBottom(),setTimeout(function(){t.animation_switch=!0,t.scrollTop=t.scrollTop-1},500)},onLoad:function(){this.messageList_x=this.nowMessageList.length>=15?this.nowMessageList.slice(-15):this.nowMessageList.slice(0),t.setNavigationBarTitle({title:this.userData.friend.nickname})},methods:{startRecognize:function(){var t=this,e={engine:"iFly"};this.message_content="",plus.speech.startRecognize(e,function(e){t.message_content+=e},function(t){})},sendMessge:function(){var t=this.message_content;this.message_content="",t.length&&(void 0!==this.friend.id&&6===this.friend.id?this.$store.dispatch("sendRobotValue",{friendId:this.friend.id,messageContent:t,isreceive:!1}):this.$store.dispatch("addMessage",{friendId:this.friend.id,messageContent:t,isreceive:!1}))},scrollToBottom:function(){var e=this;t.createSelectorQuery().select("#scroll-content").boundingClientRect().exec(function(t){null!=t[0]&&(e.scrollTop=t[0].height+100)})}},components:{messageShow:a.default,messageNavBar:i.default}}}).call(e,n(1).default)},60:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(62),i=n.n(s),a=n(71);var r=function(t){n(61)},o=n(0)(i.a,a.a,r,null,null);e.default=o.exports},61:function(t,e){},62:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},i=o(n(63)),a=o(n(67)),r=n(2);function o(t){return t&&t.__esModule?t:{default:t}}e.default={components:{uniStatusBar:i.default,uniIcon:a.default},props:{title:{type:String,default:""},leftText:{type:String,default:""},rightText:{type:String,default:""},leftIcon:{type:String,default:""},rightIcon:{type:String,default:""},fixed:{type:[Boolean,String],default:!1},color:{type:String,default:"#000000"},backgroundColor:{type:String,default:"#FFFFFF"},statusBar:{type:[Boolean,String],default:""},shadow:{type:String,default:""}},computed:s({},(0,r.mapGetters)(["friend"]),(0,r.mapState)(["hasLogin"]),{isFixed:function(){return"true"===String(this.fixed)},insertStatusBar:function(){switch(String(this.statusBar)){case"true":return!0;case"false":return!1;default:return this.isFixed}},hasShadow:function(){var t=this.backgroundColor;switch(String(this.shadow)){case"true":return!0;case"false":return!1;default:return"transparent"!==t&&t.indexOf("rgba")<0}}}),methods:{onClickLeft:function(){this.$emit("clickLeft"),this.$emit("click-left")},onClickRight:function(){this.$emit("clickRight"),this.$emit("click-right")}}}},63:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(65),i=n.n(s),a=n(66);var r=function(t){n(64)},o=n(0)(i.a,a.a,r,null,null);e.default=o.exports},64:function(t,e){},65:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={computed:{style:function(){return""}}}},66:function(t,e,n){"use strict";var s={render:function(){var t=this.$createElement;return(this._self._c||t)("view",{staticClass:"uni-status-bar",style:this.style},[this._t("default",null,{mpcomid:"tm2-0"})],2)},staticRenderFns:[]};e.a=s},67:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(69),i=n.n(s),a=n(70);var r=function(t){n(68)},o=n(0)(i.a,a.a,r,null,null);e.default=o.exports},68:function(t,e){},69:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{type:String,color:String,size:Number},computed:{fontSize:function(){return this.size+"px"}},methods:{onClick:function(){this.$emit("click")}}}},70:function(t,e,n){"use strict";var s={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("view",{staticClass:"uni-icon",class:["uni-icon-"+t.type],style:{color:t.color,"font-size":t.fontSize},attrs:{eventid:"gms-0"},on:{click:function(e){t.onClick()}}})},staticRenderFns:[]};e.a=s},71:function(t,e,n){"use strict";var s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:"uni-navbar",class:{"uni-navbar-fixed":t.isFixed,"uni-navbar-shadow":t.hasShadow},style:{"background-color":t.backgroundColor}},[t.insertStatusBar?n("uni-status-bar",{attrs:{mpcomid:"Sa9-0"}}):t._e(),n("view",{staticClass:"uni-navbar-header",style:{color:t.color}},[n("view",{staticClass:"uni-navbar-btn uni-navbar-btn-left",attrs:{eventid:"O8h-0"},on:{tap:t.onClickLeft}},[n("view",{staticClass:"uni-navbar-btn-icon"},[n("uni-icon",{attrs:{type:t.leftIcon,color:t.color,size:24,mpcomid:"NeF-1"}})],1),n("view",{staticClass:"uni-navbar-btn-text"},[t._v(t._s(t.leftText))]),t._t("left",null,{mpcomid:"4bd-2"})],2),n("view",{staticClass:"uni-navbar-container"},[void 0!==t.friend?n("view",{staticClass:"uni-navbar-container-title"},[t._v(t._s(t.friend.uName))]):t._e(),t._t("default",null,{mpcomid:"GNK-3"})],2),n("view",{staticClass:"uni-navbar-btn uni-navbar-btn-right",attrs:{eventid:"Lku-1"},on:{tap:t.onClickRight}},[n("view",{staticClass:"uni-navbar-btn-text"},[t._v(t._s(t.rightText))]),t._t("right",null,{mpcomid:"5GR-4"})],2)])],1)},staticRenderFns:[]};e.a=s},72:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(74),i=n.n(s),a=n(75);var r=function(t){n(73)},o=n(0)(i.a,a.a,r,null,null);e.default=o.exports},73:function(t,e){},74:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},i=n(2);e.default={onLoad:function(){},data:function(){return{showImg:!0}},computed:s({},(0,i.mapGetters)(["nowMessageList","friend"]),(0,i.mapState)(["self","hasLogin"]),{userData:function(){return{self:this.self,friend:this.friend}},messageList_x:function(){var t=this,e=[];return this.nowMessageList&&this.friend&&(e=this.nowMessageList.find(function(e){return e.friendId===t.friend.id})),e?e.list:[]}}),updated:function(){this.$emit("scrollC")}}},75:function(t,e,n){"use strict";var s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",t._l(t.messageList_x,function(e,s){return n("view",{key:s,staticClass:"m-item",attrs:{id:"message"+t.id}},[n("view",{staticClass:"m-left"},[e.isreceive&&t.showImg?n("image",{staticClass:"head_icon",attrs:{src:t.userData.friend.uAvatar}}):t._e()]),n("view",{staticClass:"m-content"},[n("view",{staticClass:"m-content-head",class:{"m-content-head-right":!e.isreceive}},[n("view",{class:e.isreceive?"m-content-head-home":"m-content-head-customer"},[t._v(t._s(e.messageContent)+" ")])])]),n("view",{staticClass:"m-right"},[!e.isreceive&&t.showImg?n("image",{staticClass:"head_icon",attrs:{src:t.userData.self.uAvatar}}):t._e()])])}))},staticRenderFns:[]};e.a=s},76:function(t,e,n){"use strict";var s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:"uni-column"},[n("scroll-view",{style:{height:t.style.contentViewHeight+"px"},attrs:{id:"scrollview","scroll-y":"","scroll-with-animation":t.animation_switch,"scroll-top":t.scrollTop}},[n("view",{attrs:{id:"scroll-content"}},t._l(t.messageList_x,function(e,s){return n("view",{key:s,staticClass:"m-item",attrs:{id:"message"+s}},[n("view",{staticClass:"item-time"},[n("span",[t._v(t._s(e.addTime))])]),n("view",{staticClass:"item-content"},[n("view",{staticClass:"m-left"},[e.isreceive?n("image",{staticClass:"head_icon",attrs:{src:t.userData.friend.uAvatar}}):t._e()]),n("view",{staticClass:"m-content"},[n("view",{staticClass:"m-content-head",class:{"m-content-head-right":!e.isreceive}},[n("view",{class:e.isreceive?"m-content-head-home":"m-content-head-customer"},[t._v("\n                                "+t._s(e.messageContent)+"\n                            ")])])]),n("view",{staticClass:"m-right"},[e.isreceive?t._e():n("image",{staticClass:"head_icon",attrs:{src:t.userData.self.uAvatar}})])])])}))]),n("view",{staticClass:"footer-center"},[n("view",{staticClass:"uni-icon uni-icon-mic",attrs:{eventid:"AqT-0"},on:{tap:t.startRecognize}}),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message_content,expression:"message_content"}],staticClass:"input-text",attrs:{"auto-focus":"",eventid:"KfG-1"},domProps:{value:t.message_content},on:{input:function(e){e.target.composing||(t.message_content=e.target.value)}}}),n("button",{attrs:{id:"msg-type",type:"default",eventid:"DnR-2"},on:{tap:t.sendMessge}},[t._v("发送")])],1)],1)},staticRenderFns:[]};e.a=s}},[56]);